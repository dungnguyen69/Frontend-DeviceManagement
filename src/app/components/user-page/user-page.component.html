<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body style="background-color:aquamarine" *ngIf="isLoggedIn">
    <div class="header-section">
        <h2 class="header-title">User page</h2>
        <button type="button" class="btn btn-secondary reset-filter" matTooltip="Rerset filter value(s)"
            (click)="resetFilterValues()">Reset
            filter</button>
    </div>
    <section class="example-container mat-elevation-z8 border" tabindex="0">
        <table mat-table [dataSource]="dataSource" matTableExporter>

            <ng-container matColumnDef="Number">
                <th mat-header-cell *matHeaderCellDef class="noborder">
                    <span>No.</span>
                </th>
                <td mat-cell *matCellDef="let element;let i=index"> {{i+1}}</td>
            </ng-container>

            <ng-container matColumnDef="NumberFilter">
                <th mat-header-cell *matHeaderCellDef>
                    <div class="width-cell-filter-msmall">
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="BadgeID">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Badge ID</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.badgeId}} </td>
            </ng-container>
            <ng-container matColumnDef="BadgeIDFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <input type="text" [ngModel]="filteredValues.badgeId" matInput
                                (ngModelChange)="changeFilterInput($event,'badgeId', columnsIndex.BADGE_ID)"
                                [matAutocomplete]="auto" placeholder="Enter badge id">
                            <mat-autocomplete #auto="matAutocomplete"
                                (optionSelected)="applyFilterForInputForm($event,'badgeId')">
                                <mat-option *ngFor="let option of this.keywordSuggestionOptions[columnsIndex.BADGE_ID]"
                                    [value]="option">
                                    {{option}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="User Name">
                <th mat-header-cell *matHeaderCellDef>
                    <span>User Name</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.userName}} </td>
            </ng-container>
            <ng-container matColumnDef="UserNameFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <input type="text" [ngModel]="filteredValues.userName" matInput
                                (ngModelChange)="changeFilterInput($event,'userName', columnsIndex.USER_NAME)"
                                [matAutocomplete]="auto" placeholder="Enter user name">
                            <mat-autocomplete #auto="matAutocomplete"
                                (optionSelected)="applyFilterForInputForm($event,'userName')">
                                <mat-option *ngFor="let option of this.keywordSuggestionOptions[columnsIndex.USER_NAME]"
                                    [value]="option">
                                    {{option}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="First Name">
                <th mat-header-cell *matHeaderCellDef>
                    <span>First Name</span>
                </th>
                <td mat-cell *matCellDef="let element">
                    <span>{{element.firstName}}</span>
                </td>
            </ng-container>
            <ng-container matColumnDef="FirstNameFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <input type="text" [ngModel]="filteredValues.firstName" matInput
                                (ngModelChange)="changeFilterInput($event,'firstName', columnsIndex.USER_NAME)"
                                [matAutocomplete]="auto" placeholder="Enter first name">
                            <mat-autocomplete #auto="matAutocomplete"
                                (optionSelected)="applyFilterForInputForm($event,'firstName')">
                                <mat-option *ngFor="let option of this.keywordSuggestionOptions[columnsIndex.USER_NAME]"
                                    [value]="option">
                                    {{option}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="Last Name">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Last Name</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
            </ng-container>
            <ng-container matColumnDef="LastNameFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <input type="text" [ngModel]="filteredValues.lastName" matInput
                                (ngModelChange)="changeFilterInput($event,'lastName', columnsIndex.LAST_NAME)"
                                [matAutocomplete]="auto" placeholder="Enter last name">
                            <mat-autocomplete #auto="matAutocomplete"
                                (optionSelected)="applyFilterForInputForm($event,'lastName')">
                                <mat-option *ngFor="let option of this.keywordSuggestionOptions[columnsIndex.LAST_NAME]"
                                    [value]="option">
                                    {{option}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="Email">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Email</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.email}} </td>
            </ng-container>
            <ng-container matColumnDef="EmailFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <input type="text" [ngModel]="filteredValues.email" matInput
                                (ngModelChange)="changeFilterInput($event,'email', columnsIndex.EMAIL)"
                                [matAutocomplete]="auto" placeholder="Enter email">
                            <mat-autocomplete #auto="matAutocomplete"
                                (optionSelected)="applyFilterForInputForm($event,'email')">
                                <mat-option *ngFor="let option of this.keywordSuggestionOptions[columnsIndex.EMAIL]"
                                    [value]="option">
                                    {{option}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="Phone Number">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Phone Number</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
            </ng-container>
            <ng-container matColumnDef="PhoneNumberFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <input type="text" [ngModel]="filteredValues.phoneNumber" matInput
                                (ngModelChange)="changeFilterInput($event,'phoneNumber', columnsIndex.PHONE_NUMBER)"
                                [matAutocomplete]="auto" placeholder="Enter phone number">
                            <mat-autocomplete #auto="matAutocomplete"
                                (optionSelected)="applyFilterForInputForm($event,'phoneNumber')">
                                <mat-option
                                    *ngFor="let option of this.keywordSuggestionOptions[columnsIndex.PHONE_NUMBER]"
                                    [value]="option">
                                    {{option}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="Project">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Project</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.project}} </td>
            </ng-container>
            <ng-container matColumnDef="ProjectFilter">
                <th mat-header-cell *matHeaderCellDef class="width-cell-filter-msmall">
                    <div>
                        <mat-form-field appearance="outline">
                            <mat-select matNativeControl [(ngModel)]="filteredValues.project"
                                (ngModelChange)="applyFilterForDropdowns()">
                                <mat-option value="" selected style="background-color: white;">All</mat-option>
                                <mat-option *ngFor="let project of dropdownOptions.projectList" [value]="project">
                                    {{project}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </th>
            </ng-container>

            <ng-container matColumnDef="isEnable">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Validate</span>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.isEnable}} </td>
            </ng-container>
            <ng-container matColumnDef="Enable">
                <th mat-header-cell *matHeaderCellDef>
                </th>
            </ng-container>

            <ng-container matColumnDef="Action">
                <th mat-header-cell *matHeaderCellDef>
                    <span>Permission</span>
                </th>
                <td mat-cell *matCellDef="let row;let i=index">
                    <mat-icon *ngIf="!(row.userName == username)" (click)="openProvidePermissionDialog(row,i+1)"
                        class="detail-icon">pageview</mat-icon>
                </td>
            </ng-container>
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>
                </th>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columns" class="first-header-row"></tr>
            <tr mat-row *matRowDef="let row; columns: columns;"
                [ngClass]="{'highlight': row.userName == username}"></tr>
            <tr mat-header-row *matHeaderRowDef="columnFilters" class="second-header-row"></tr>

        </table>
    </section>
    <mat-paginator class="paginator" [length]="size" [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex"
        [pageSize]="pageSize" aria-label="Select" (page)="handlePagination($event)">
    </mat-paginator>
</body>

</html>